# Testing Guide - –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã

## üéØ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (Windows)

### 1. –£–±–µ–¥–∏—Å—å —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Python

```bash
python --version
# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å Python 3.8+
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
# –í –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:
pip install PyJWT bcrypt boto3 pydantic pyyaml python-dotenv
```

### 3. –ó–∞–ø—É—Å—Ç–∏ —Ç–µ—Å—Ç—ã

```bash
# –ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç-–Ω–∞–±–æ—Ä:
python test_all.py

# –ò–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã:
python test_syntax_only.py          # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ (–±—ã—Å—Ç—Ä–æ!)
python test_unit_auth.py            # Unit —Ç–µ—Å—Ç—ã (8 tests)
python test_production_features.py  # Production features (7 tests)
python demo_auth.py                 # –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è
```

---

## üìä –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è—é—Ç —Ç–µ—Å—Ç—ã?

### `test_syntax_only.py` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
‚úÖ –í—Å–µ Python —Ñ–∞–π–ª—ã –∫–æ–º–ø–∏–ª–∏—Ä—É—é—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚ö° –ë—ã—Å—Ç—Ä—ã–π (0.1 —Å–µ–∫)
- üîß –ù–µ —Ç—Ä–µ–±—É–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- ‚úÖ 8/8 —Ñ–∞–π–ª–æ–≤ –ø—Ä–æ—à–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫—É

**–°—Ç–∞—Ç—É—Å:** ‚úÖ PASSED

---

### `test_unit_auth.py` - Unit —Ç–µ—Å—Ç—ã
–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

1. ‚úÖ **Password Hashing** - SHA256 —Ä–∞–±–æ—Ç–∞–µ—Ç
2. ‚úÖ **JWT Generation** - –¢–æ–∫–µ–Ω—ã —Å–æ–∑–¥–∞—é—Ç—Å—è (Header.Payload.Signature)
3. ‚úÖ **JWT Validation** - –¢–æ–∫–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è
4. ‚úÖ **JWT Tampering** - –ü–æ–¥–¥–µ–ª–∫–∏ –æ—Ç–∫–ª–æ–Ω—è—é—Ç—Å—è! üîí
5. ‚úÖ **Session Storage** - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/—á—Ç–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ
6. ‚úÖ **Multiple Sessions** - –ù–µ—Å–∫–æ–ª—å–∫–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
7. ‚úÖ **Full Auth Flow** - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è ‚Üí –õ–æ–≥–∏–Ω ‚Üí –í–∞–ª–∏–¥–∞—Ü–∏—è ‚Üí –õ–æ–≥–∞—É—Ç

**–°—Ç–∞—Ç—É—Å:** ‚úÖ 8/8 tests PASSED

---

### `test_production_features.py` - Production Features
–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–∏—á–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:

1. ‚úÖ **bcrypt Available** - –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
2. ‚úÖ **bcrypt Hashing** - –§–æ—Ä–º–∞—Ç `$2b$12$...` —Å —Å–æ–ª—å—é
3. ‚úÖ **bcrypt Verification** - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–æ–ª–µ–π —Ä–∞–±–æ—Ç–∞–µ—Ç
4. ‚úÖ **Rate Limiting (Normal)** - –†–∞–∑—Ä–µ—à–µ–Ω–æ 5 –ø–æ–ø—ã—Ç–æ–∫
5. ‚úÖ **Rate Limiting (Lockout)** - –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ—Å–ª–µ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è
6. ‚úÖ **Rate Limiting (Expire)** - –ê–≤—Ç–æ-—Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —á–µ—Ä–µ–∑ 5 –º–∏–Ω
7. ‚ö†Ô∏è **Full Login Flow** - –¢—Ä–µ–±—É–µ—Ç AWS credentials (–Ω–æ—Ä–º–∞ –¥–ª—è dev)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ 6/7 tests PASSED (1 AWS —Ç–µ—Å—Ç - –æ–∂–∏–¥–∞–µ–º–æ)

---

### `demo_auth.py` - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è
–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å –æ–±—ä—è—Å–Ω–µ–Ω–∏—è–º–∏:

```
üîê Step 1: Registration
   Password: test123
   Hash: 6ca13d52ca70c883e0f0bb101e425a89e8624de51db2d2392593af6a84118090

üé´ Step 2: Login (Generate JWT)
   Token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
   Structure: Header.Payload.Signature

‚úÖ Step 3: Validate Token
   Decoded: {'sub': 'anna', 'jti': 'abc123', ...}
   Session in DB: ‚úÖ Valid

üîì Step 4: Logout
   Session deleted from DynamoDB
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ PASSED (—Å mock storage)

---

### `test_all.py` - –ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç-–Ω–∞–±–æ—Ä
–ó–∞–ø—É—Å–∫–∞–µ—Ç –≤—Å–µ —Ç–µ—Å—Ç—ã –≤—ã—à–µ + –ø—Ä–æ–≤–µ—Ä–∫—É –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã

---

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### Linux –æ–∫—Ä—É–∂–µ–Ω–∏–µ: cryptography error
```
ModuleNotFoundError: No module named '_cffi_backend'
pyo3_runtime.PanicException: Python API call failed
```

**–ü—Ä–∏—á–∏–Ω–∞:** –ö–æ–Ω—Ñ–ª–∏–∫—Ç —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ –≤ Linux –æ–∫—Ä—É–∂–µ–Ω–∏–∏
**–†–µ—à–µ–Ω–∏–µ:** –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å - –Ω–∞ Windows —ç—Ç–æ –Ω–µ –ø—Ä–æ–±–ª–µ–º–∞!
**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:** –°–∏–Ω—Ç–∞–∫—Å–∏—Å –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π (`test_syntax_only.py`)

---

## üöÄ –ó–∞–ø—É—Å–∫ –Ω–∞ production

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
pip install PyJWT bcrypt boto3 pydantic gradio
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```bash
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:
export JWT_SECRET_KEY="your-super-secret-key-min-32-chars"

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ:
export BCRYPT_ROUNDS=12                # –°–ª–æ–∂–Ω–æ—Å—Ç—å —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 12)
export JWT_EXPIRATION_DAYS=30          # –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ —Ç–æ–∫–µ–Ω–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 30)
export MAX_LOGIN_ATTEMPTS=5            # –ü–æ–ø—ã—Ç–æ–∫ –¥–æ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 5)
export LOCKOUT_DURATION=300            # –°–µ–∫—É–Ω–¥ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 300)

# AWS DynamoDB:
export AWS_ACCESS_KEY_ID="..."
export AWS_SECRET_ACCESS_KEY="..."
export DYNAMODB_REGION="eu-west-1"
export DYNAMODB_TABLE_NAME="trading-alerts"
```

### –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
```bash
python app.py
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
trading-alerts-system/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ auth_service.py          ‚Üê üß† JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ storage/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ session_storage.py       ‚Üê üíæ DynamoDB —Å–µ—Å—Å–∏–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ dynamodb_storage.py      ‚Üê üíæ DynamoDB –æ—Å–Ω–æ–≤–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ       ‚îî‚îÄ‚îÄ cookie_helper.py         ‚Üê üç™ –†–∞–±–æ—Ç–∞ —Å cookies (–¥–ª—è UI)
‚îÇ
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îú‚îÄ‚îÄ test_all.py                  ‚Üê üß™ –ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç-–Ω–∞–±–æ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ test_syntax_only.py          ‚Üê üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
‚îÇ   ‚îú‚îÄ‚îÄ test_unit_auth.py            ‚Üê üß™ Unit —Ç–µ—Å—Ç—ã (8 tests)
‚îÇ   ‚îú‚îÄ‚îÄ test_production_features.py  ‚Üê üß™ Production features (7 tests)
‚îÇ   ‚îî‚îÄ‚îÄ demo_auth.py                 ‚Üê üé≠ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è
‚îÇ
‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îú‚îÄ‚îÄ AUTHENTICATION.md            ‚Üê üìö –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ PRODUCTION_ENHANCEMENTS.md   ‚Üê üìö bcrypt, rate limiting, cookies
‚îÇ   ‚îî‚îÄ‚îÄ TESTING_GUIDE.md             ‚Üê üìö –≠—Ç–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è!
‚îÇ
‚îú‚îÄ‚îÄ app.py                           ‚Üê üé® Gradio UI
‚îî‚îÄ‚îÄ requirements.txt                 ‚Üê üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

---

## ‚úÖ Checklist –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –Ω–∞ Windows

- [ ] Python 3.8+ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (`python --version`)
- [ ] –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã (`pip install PyJWT bcrypt boto3 pydantic`)
- [ ] –ü–µ—Ä–µ–∫–ª—é—á–∏–ª–∏—Å—å –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –≤–µ—Ç–∫—É (`git checkout claude/session-persistence-01Pv8ALJ5J24HHtguGQCiAoA`)
- [ ] –ó–∞–ø—É—Å—Ç–∏–ª–∏ —Ç–µ—Å—Ç —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ (`python test_syntax_only.py`)
- [ ] –ó–∞–ø—É—Å—Ç–∏–ª–∏ unit —Ç–µ—Å—Ç—ã (`python test_unit_auth.py`)
- [ ] –ó–∞–ø—É—Å—Ç–∏–ª–∏ –¥–µ–º–æ (`python demo_auth.py`)
- [ ] –ù–∞—Å—Ç—Ä–æ–∏–ª–∏ JWT_SECRET_KEY –≤ `.env` —Ñ–∞–π–ª–µ
- [ ] –ù–∞—Å—Ç—Ä–æ–∏–ª–∏ AWS credentials (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ DynamoDB)
- [ ] –ó–∞–ø—É—Å—Ç–∏–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (`python app.py`)

---

## üéØ –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### ‚úÖ –î–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å:
- `test_syntax_only.py` - 8/8 —Ñ–∞–π–ª–æ–≤
- `test_unit_auth.py` - 8/8 —Ç–µ—Å—Ç–æ–≤
- `test_production_features.py` - 6/7 —Ç–µ—Å—Ç–æ–≤ (1 AWS —Ç–µ—Å—Ç –º–æ–∂–µ—Ç —Ñ–µ–π–ª–∏—Ç—å—Å—è –±–µ–∑ credentials)
- `demo_auth.py` - –ü–æ–ª–Ω–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è

### ‚ö†Ô∏è –ú–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å (–Ω–æ —ç—Ç–æ –Ω–æ—Ä–º–∞):
- 1 —Ç–µ—Å—Ç –≤ `test_production_features.py` —Ç—Ä–µ–±—É–µ—Ç AWS credentials
- `test_all.py` –≤ Linux –æ–∫—Ä—É–∂–µ–Ω–∏–∏ –∏–∑-–∑–∞ cryptography

### ‚ùå –ù–ï –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å:
- –ï—Å–ª–∏ Python –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- –ï—Å–ª–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- –ï—Å–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –≤–µ—Ç–∫–∞

---

## üìû –ü–æ–º–æ—â—å

–ï—Å–ª–∏ —Ç–µ—Å—Ç—ã –Ω–µ –ø—Ä–æ—Ö–æ–¥—è—Ç –Ω–∞ Windows:

1. **–ü—Ä–æ–≤–µ—Ä—å –≤–µ—Ä—Å–∏—é Python:** `python --version` (–Ω—É–∂–µ–Ω 3.8+)
2. **–£—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** `pip install PyJWT bcrypt boto3 pydantic`
3. **–ü—Ä–æ–≤–µ—Ä—å –≤–µ—Ç–∫—É:** `git branch --show-current` (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å `claude/session-persistence-...`)
4. **–ó–∞–ø—É—Å—Ç–∏ –ø—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç:** `python test_syntax_only.py`

–ï—Å–ª–∏ –≤—Å–µ —Ä–∞–≤–Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - –ø–æ–∫–∞–∂–∏ –≤—ã–≤–æ–¥ –∫–æ–º–∞–Ω–¥—ã:
```bash
python test_syntax_only.py
```

---

**–°–æ–∑–¥–∞–Ω–æ:** 2025-11-17
**–í–µ—Ç–∫–∞:** `claude/session-persistence-01Pv8ALJ5J24HHtguGQCiAoA`
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Production-ready
