# üéØ –ò–∑–º–µ–Ω–µ–Ω–∏—è –¥–ª—è –º—É–ª—å—Ç–∏–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π —Å–∏—Å—Ç–µ–º—ã (–í–∞—Ä–∏–∞–Ω—Ç 1B)

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:

### 1. User ID —Å—Ç–∞–ª –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º –ø–æ–ª–µ–º
**–§–∞–π–ª:** `app.py`

**–ò–∑–º–µ–Ω–µ–Ω–æ:**
- –ü–æ–ª–µ "User ID (Optional)" ‚Üí "User ID (Required)"
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤ `create_signal_async()`:
  ```python
  if not user_id or user_id.strip() == "":
      return "‚ùå User ID is required! Please enter your username.", get_signals_table()
  ```

**–ß—Ç–æ —ç—Ç–æ –¥–∞–µ—Ç:**
- –¢–µ–ø–µ—Ä—å –∫–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ–±—è–∑–∞–Ω —É–∫–∞–∑—ã–≤–∞—Ç—å —Å–≤–æ–π User ID –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–∏–≥–Ω–∞–ª–∞
- –ë–µ–∑ User ID —Å–∏–≥–Ω–∞–ª –Ω–µ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω

---

### 2. –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–ª–æ–Ω–∫–∞ User ID –≤ —Ç–∞–±–ª–∏—Ü—É —Å–∏–≥–Ω–∞–ª–æ–≤
**–§–∞–π–ª:** `app.py`

**–ò–∑–º–µ–Ω–µ–Ω–æ:**
- –í `get_signals_table()` –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–ª–æ–Ω–∫–∞ `'User ID': signal.user_id or 'N/A'`

**–ß—Ç–æ —ç—Ç–æ –¥–∞–µ—Ç:**
- –í —Ç–∞–±–ª–∏—Ü–µ —Å–∏–≥–Ω–∞–ª–æ–≤ —Ç–µ–ø–µ—Ä—å –≤–∏–¥–Ω–æ, –∫—Ç–æ —Å–æ–∑–¥–∞–ª –∫–∞–∂–¥—ã–π —Å–∏–≥–Ω–∞–ª

---

### 3. –î–æ–±–∞–≤–ª–µ–Ω —Ñ–∏–ª—å—Ç—Ä –ø–æ User ID
**–§–∞–π–ª:** `app.py`

**–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ TAB 2 "View Signals":**
```python
# –§–∏–ª—å—Ç—Ä –ø–æ User ID
with gr.Row():
    filter_user_id = gr.Textbox(
        label="Filter by User ID",
        placeholder="Leave empty to see all signals, or enter username (e.g., anna)",
        value=""
    )
    filter_btn = gr.Button("üîç Filter", variant="primary")
    refresh_btn = gr.Button("üîÑ Refresh All", variant="secondary")

# –ö–Ω–æ–ø–∫–∞ Filter - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å–∏–≥–Ω–∞–ª—ã —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
filter_btn.click(
    fn=lambda user_id: get_signals_table(user_id=user_id),
    inputs=filter_user_id,
    outputs=signals_table
)

# –ö–Ω–æ–ø–∫–∞ Refresh All - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ —Å–∏–≥–Ω–∞–ª—ã
refresh_btn.click(
    fn=lambda: get_signals_table(user_id=""),
    outputs=signals_table
)
```

**–ß—Ç–æ —ç—Ç–æ –¥–∞–µ—Ç:**
- –ö–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å —Å–∏–≥–Ω–∞–ª—ã –ø–æ —Å–≤–æ–µ–º—É User ID
- –ú–æ–∂–Ω–æ –≤–∏–¥–µ—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ —Å–∏–≥–Ω–∞–ª—ã
- –ú–æ–∂–Ω–æ –≤–∏–¥–µ—Ç—å –≤—Å–µ —Å–∏–≥–Ω–∞–ª—ã (–µ—Å–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä –ø—É—Å—Ç—ã–º)

---

### 4. –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è get_signals_table()
**–§–∞–π–ª:** `app.py`

**–ò–∑–º–µ–Ω–µ–Ω–æ:**
```python
def get_signals_table(user_id: str = "") -> pd.DataFrame:
    """–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–æ–≤ –∏–∑ DynamoDB —Å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º —Ñ–∏–ª—å—Ç—Ä–æ–º –ø–æ user_id"""
    try:
        signals = asyncio.run(storage.get_all_signals())
        
        # –§–∏–ª—å—Ç—Ä—É–µ–º –ø–æ user_id –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω
        if user_id and user_id.strip():
            signals = [s for s in signals if s.user_id and s.user_id.strip() == user_id.strip()]
        
        # ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥
```

**–ß—Ç–æ —ç—Ç–æ –¥–∞–µ—Ç:**
- –§—É–Ω–∫—Ü–∏—è —Ç–µ–ø–µ—Ä—å –º–æ–∂–µ—Ç —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å —Å–∏–≥–Ω–∞–ª—ã –ø–æ user_id
- –ï—Å–ª–∏ user_id –Ω–µ —É–∫–∞–∑–∞–Ω - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Å–µ —Å–∏–≥–Ω–∞–ª—ã
- –ï—Å–ª–∏ user_id —É–∫–∞–∑–∞–Ω - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å–∏–≥–Ω–∞–ª—ã —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

---

## üìã –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

### –î–ª—è –≤–∞—Å (anna):
1. –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–∏–≥–Ω–∞–ª–∞ –≤–≤–æ–¥–∏—Ç–µ: `anna` –≤ –ø–æ–ª–µ User ID
2. –í–æ –≤–∫–ª–∞–¥–∫–µ "View Signals" –≤–≤–æ–¥–∏—Ç–µ: `anna` –∏ –Ω–∞–∂–∏–º–∞–µ—Ç–µ "üîç Filter"
3. –í–∏–¥–∏—Ç–µ —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ —Å–∏–≥–Ω–∞–ª—ã!

### –î–ª—è –¥—Ä—É–≥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, john):
1. –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–∏–≥–Ω–∞–ª–∞ –≤–≤–æ–¥–∏—Ç: `john` –≤ –ø–æ–ª–µ User ID
2. –í–æ –≤–∫–ª–∞–¥–∫–µ "View Signals" –≤–≤–æ–¥–∏—Ç: `john` –∏ –Ω–∞–∂–∏–º–∞–µ—Ç "üîç Filter"
3. –í–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ —Å–∏–≥–Ω–∞–ª—ã!

### –î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤—Å–µ—Ö —Å–∏–≥–Ω–∞–ª–æ–≤:
1. –í–æ –≤–∫–ª–∞–¥–∫–µ "View Signals" –æ—Å—Ç–∞–≤—å—Ç–µ –ø–æ–ª–µ "Filter by User ID" –ø—É—Å—Ç—ã–º
2. –ù–∞–∂–º–∏—Ç–µ "üîÑ Refresh All"
3. –í–∏–¥–∏—Ç–µ –≤—Å–µ —Å–∏–≥–Ω–∞–ª—ã –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Lambda –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –Ω–∞ —Ä–∞–∑–Ω—ã–µ —Ç–µ–ª–µ—Ñ–æ–Ω—ã

–í AWS Secrets Manager –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å mapping:
```json
{
  "users": {
    "anna": {
      "pushover_user_key": "–≤–∞—à_–∫–ª—é—á_pushover",
      "name": "Anna"
    },
    "john": {
      "pushover_user_key": "–∫–ª—é—á_pushover_–¥—Ä—É–≥–∞",
      "name": "John"
    }
  }
}
```

–≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç Lambda –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–µ–ª–µ—Ñ–æ–Ω –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç User ID —Å–∏–≥–Ω–∞–ª–∞.

---

## ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ:
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ: `python app.py`
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–æ–≤ —Å —Ä–∞–∑–Ω—ã–º–∏ User ID
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é
4. –î–µ–ø–ª–æ–∏—Ç—å –Ω–∞ Hugging Face Spaces
